<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel de Administraci√≥n - SexShop</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body class="bg-dark text-light">
  <div class="container mt-4">
    <div class="text-center mb-4">
      <h2 class="fw-bold text-danger">
       Panel de Administraci√≥n
      </h2>
      <p class="text-secondary">Gestiona tus usuarios, productos y trabajadores con estilo</p>
      <a href="/" class="btn btn-outline-light btn-sm mt-2">Volver al sitio</a>
    </div>

    <!-- Navegaci√≥n con pesta√±as -->
    <ul class="nav nav-tabs justify-content-center mb-4" id="adminTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active fw-semibold text-danger" id="usuarios-tab" data-bs-toggle="tab"
          data-bs-target="#usuarios" type="button" role="tab">
          üë• Usuarios
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link fw-semibold text-danger" id="productos-tab" data-bs-toggle="tab"
          data-bs-target="#productos" type="button" role="tab">
          üõçÔ∏è Productos
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link fw-semibold text-danger" id="trabajadores-tab" data-bs-toggle="tab"
          data-bs-target="#trabajadores" type="button" role="tab">
          üíº Trabajadores
        </button>
      </li>
    </ul>

    <div class="tab-content" id="adminTabsContent">
      <!-- ====================== USUARIOS ====================== -->
      <div class="tab-pane fade show active" id="usuarios" role="tabpanel">
        <div class="row">
          <div class="col-md-7 mb-4">
            <div class="card bg-secondary bg-opacity-25 border-danger shadow-lg">
              <div class="card-header bg-danger text-light fw-bold">Listado de Usuarios</div>
              <div class="card-body">
                <table class="table table-dark table-hover align-middle mb-0">
                  <thead class="table-danger">
                    <tr>
                      <th>ID</th>
                      <th>Nombre</th>
                      <th>Correo</th>
                      <th>Rol</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:each="u : ${usuarios}">
                      <td th:text="${u.id}"></td>
                      <td th:text="${u.nombre}"></td>
                      <td th:text="${u.correo}"></td>
                      <td th:text="${u.rol}"></td>
                      <td>
                        <a th:href="@{'/admin/editar/' + ${u.id}}" class="btn btn-sm btn-outline-danger me-1">Editar</a>
                        <a th:href="@{'/admin/eliminar/' + ${u.id}}" class="btn btn-sm btn-outline-light"
                          onclick="return confirm('¬øEliminar usuario?');">Eliminar</a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="col-md-5">
            <div class="card bg-dark border-danger shadow-lg">
              <div class="card-header bg-danger text-light fw-bold"
                th:text="${usuario.id} != null ? 'Editar Usuario' : 'Crear Usuario'"></div>
              <div class="card-body">
                <form th:action="@{/admin/guardar}" th:object="${usuario}" method="post" class="needs-validation">
                  <input type="hidden" th:field="*{id}" />
                  <div class="mb-3">
                    <label class="form-label text-light">Nombre</label>
                    <input type="text" class="form-control bg-light text-dark border-0" th:field="*{nombre}" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Correo</label>
                    <input type="email" class="form-control bg-light text-dark border-0" th:field="*{correo}" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Contrase√±a</label>
                    <input type="text" class="form-control bg-light text-dark border-0" th:field="*{password}" />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Rol</label>
                    <select class="form-select bg-light text-dark border-0" th:field="*{rol}">
                      <option value="USER">USER</option>
                      <option value="ADMIN">ADMIN</option>
                    </select>
                  </div>
                  <div class="d-grid">
                    <button type="submit" class="btn btn-danger fw-bold">Guardar</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ====================== PRODUCTOS ====================== -->
      <div class="tab-pane fade" id="productos" role="tabpanel">
        <div class="row">
          <div class="col-md-7 mb-4">
            <div class="card bg-secondary bg-opacity-25 border-danger shadow-lg">
              <div class="card-header bg-danger text-light fw-bold">Listado de Productos</div>
              <div class="card-body">
                <table class="table table-dark table-hover align-middle">
                  <thead class="table-danger">
                    <tr>
                      <th>ID</th>
                      <th>Nombre</th>
                      <th>Descripci√≥n</th>
                      <th>Precio</th>
                      <th>Stock</th>
                      <th>Categor√≠a</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:each="p : ${productos}">
                      <td th:text="${p.id}"></td>
                      <td th:text="${p.nombre}"></td>
                      <td th:text="${p.descripcion}"></td>
                      <td th:text="${p.precio}"></td>
                      <td th:text="${p.stock}"></td>
                      <td th:text="${p.categoria}"></td>
                      <td>
                        <a th:href="@{'/admin/productos/editar/' + ${p.id}}" class="btn btn-sm btn-outline-danger me-1">Editar</a>
                        <a th:href="@{'/admin/productos/eliminar/' + ${p.id}}" class="btn btn-sm btn-outline-light"
                          onclick="return confirm('¬øEliminar producto?');">Eliminar</a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="col-md-5">
            <div class="card bg-dark border-danger shadow-lg">
              <div class="card-header bg-danger text-light fw-bold"
                th:text="${producto.id} != null ? 'Editar Producto' : 'Crear Producto'"></div>
              <div class="card-body">
                <form th:action="@{/admin/productos/guardar}" th:object="${producto}" method="post">
                  <input type="hidden" th:field="*{id}" />
                  <div class="mb-3">
                    <label class="form-label text-light">Nombre</label>
                    <input type="text" class="form-control bg-light text-dark border-0" th:field="*{nombre}" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Descripci√≥n</label>
                    <textarea class="form-control bg-light text-dark border-0" th:field="*{descripcion}"></textarea>
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Precio</label>
                    <input type="number" class="form-control bg-light text-dark border-0" step="0.01" th:field="*{precio}" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Stock</label>
                    <input type="number" class="form-control bg-light text-dark border-0" th:field="*{stock}" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Categor√≠a</label>
                    <input type="text" class="form-control bg-light text-dark border-0" th:field="*{categoria}" />
                  </div>
                  <div class="d-grid">
                    <button type="submit" class="btn btn-danger fw-bold">Guardar</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ====================== TRABAJADORES ====================== -->
      <div class="tab-pane fade" id="trabajadores" role="tabpanel">
        <div class="row">
          <div class="col-md-7 mb-4">
            <div class="card bg-secondary bg-opacity-25 border-danger shadow-lg">
              <div class="card-header bg-danger text-light fw-bold">Listado de Trabajadores</div>
              <div class="card-body">
                <table class="table table-dark table-hover align-middle">
                  <thead class="table-danger">
                    <tr>
                      <th>ID</th>
                      <th>Nombre</th>
                      <th>Apellido</th>
                      <th>Correo</th>
                      <th>Cargo</th>
                      <th>Tel√©fono</th>
                      <th>Salario</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:each="t : ${trabajadores}">
                      <td th:text="${t.id}"></td>
                      <td th:text="${t.nombre}"></td>
                      <td th:text="${t.apellido}"></td>
                      <td th:text="${t.correo}"></td>
                      <td th:text="${t.cargo}"></td>
                      <td th:text="${t.telefono}"></td>
                      <td th:text="${t.salario}"></td>
                      <td>
                        <a th:href="@{'/admin/trabajadores/editar/' + ${t.id}}" class="btn btn-sm btn-outline-danger me-1">Editar</a>
                        <a th:href="@{'/admin/trabajadores/eliminar/' + ${t.id}}" class="btn btn-sm btn-outline-light"
                          onclick="return confirm('¬øEliminar trabajador?');">Eliminar</a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="col-md-5">
            <div class="card bg-dark border-danger shadow-lg">
              <div class="card-header bg-danger text-light fw-bold"
                th:text="${trabajador.id} != null ? 'Editar Trabajador' : 'Registrar Trabajador'"></div>
              <div class="card-body">
                <form th:action="@{/admin/trabajadores/guardar}" th:object="${trabajador}" method="post">
                  <input type="hidden" th:field="*{id}" />
                  <div class="mb-3">
                    <label class="form-label text-light">Nombre</label>
                    <input type="text" class="form-control bg-light text-dark border-0" th:field="*{nombre}" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Apellido</label>
                    <input type="text" class="form-control bg-light text-dark border-0" th:field="*{apellido}" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Correo</label>
                    <input type="email" class="form-control bg-light text-dark border-0" th:field="*{correo}" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Cargo</label>
                    <input type="text" class="form-control bg-light text-dark border-0" th:field="*{cargo}" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Tel√©fono</label>
                    <input type="text" class="form-control bg-light text-dark border-0" th:field="*{telefono}" maxlength="9" required />
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-light">Salario</label>
                    <input type="number" class="form-control bg-light text-dark border-0" step="0.01" th:field="*{salario}" required />
                  </div>
                  <div class="d-grid">
                    <button type="submit" class="btn btn-danger fw-bold">Guardar</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>
